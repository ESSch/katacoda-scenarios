## История

Аналитик передает архитектору оценочный чеклист стандарта CloudNative, в котором заявлено **соответствие** приложения следующим пунктам стандрата.

>
> 1. Свойства
>    1. Способность соблюдать нефункциональные требования при увеличении нагрузки послев добавления stateless экземпляров компонента
>    1. Готовность к отказу и автоматическому самовосстановлению любого из компонентов приложения и внешних компонентов/сервисов, от которых оно зависит
>    1. NA-1.1: Хранить настройки безопасности и обеспечивать шифрование трафика между компонентами централизовано на уровне service mesh
> 1. Требования
>     1. Публиковать информацию о жизнеспособности каждого компонента через liveness endpoint
>     1. Настроить liveness probe в оркестраторе на liveness endpoint
>     1. Настроить readiness probe в оркестраторе на readiness endpoint
>

## Задание для архитектора

1. Архитектор должен убедиться, что аналитик предоставил корректную оценку.
1. Архитектор самостоятельно или вместе с командой должен предложить способы устранения отклонений от стандарта.  

Для решения задания, архитектор может применить следующие способы диагностики отклонений от стандарта

* Автоматические CloudNative проверки
* Ручной контроль конфигурационных файлов приложения
* Следите за Kiali

## Автоматическая CloudNative проверка

1. Запустите `checklist.sh`{{execute T1}}, для выполнения rego проверок (см. файл checklist.rego).
2. Определите на основании проверки отклонения от стандарта

## Устойчивость

Проанализируйте настройки сетевого взаимодействия относительно безопасности
трафика, timeout и retry:
`kubectl get virtualservices,destinationrules -n bookinfo -o yaml > /root/exercise/istio.yaml`{{execute T1}}. 

исправьте ошибки и примените (kubectl apply -n bookinfo -f /root/exercise/{NAME_FILE}.yaml

## Исправьте проблемы

1. Исправьте проблемы в файлах объектов приложения
1. Повторно запустите автоматические CloudNative проверки `checklist.sh`{{execute T1}} для самоконтроля.
1. Отправьте архив с файлами вашего решения вашему ментор для проверки. Создать `/usr/local/bin/create.sh`{{execute T1}} качать архив http://[[HOST_SUBDOMAIN]]-9000-[[KATACODA_HOST]].environments.katacoda.com/exercise.tar.
